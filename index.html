<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quote of the day</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    .btns button svg {
      width: 18px;
      height: 18px;
      margin-right: 8px;
      fill: currentColor;
    }
    .btns button {
      display: flex;
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>
  <div class="quote-box">
    <h2>Quote of the day</h2>
    <blockquote id="quote">Loading...</blockquote>
    <span id="author">Loading...</span>

    <div class="btns">
      <button onclick="getquote(api_url)">New Quote</button>
      <button onclick="share('x')">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M20.67 3H3.33A.33.33 0 0 0 3 3.33v17.34c0 .18.15.33.33.33h17.34c.18 0 .33-.15.33-.33V3.33A.33.33 0 0 0 20.67 3zm-3.2 15.1h-2.24l-3.07-4.16-3.17 4.16H6.7l4.25-5.51-4-5.39h2.25l2.9 3.93 3-3.93h2.18l-4.14 5.23 4.34 5.67z"/>
        </svg>
        Post
      </button>
      <button onclick="share('whatsapp')">WhatsApp</button>
      <button onclick="share('linkedin')">LinkedIn</button>
      <button onclick="copyToClipboard()">Copy</button>
    </div>
    <div class="dark-toggle">
      <label>
        Dark Mode
        <input type="checkbox" onchange="toggleDarkMode(this.checked)">
      </label>
    </div>
  </div>

  <script>
  const quote = document.getElementById("quote");
  const author = document.getElementById("author");

  // Using CORS proxy to avoid browser blocking
  const api_url = "https://api.allorigins.win/raw?url=https://api.quotable.io/random";

  async function getquote(url) {
    try {
      const response = await fetch(url);
      const data = await response.json();
      quote.innerHTML = data.content;
      author.innerHTML = data.author;
    } catch (error) {
      quote.innerHTML = "Failed to load quote.";
      author.innerHTML = "Try again later.";
      console.error("Error fetching quote:", error);
    }
  }

  getquote(api_url);

  function tweet() {
    const text = `${quote.innerHTML} â€” ${author.innerHTML}`;
    const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
    window.open(twitterUrl, "Tweet Window", "width=600,height=300");
  }
</script>

</body>
</html>
